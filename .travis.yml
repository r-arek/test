version: ~> 1.0
dist: focal
arch: ppc64le
virt: lxd
language: java

addons:
  apt:
    packages:
      - xsltproc
      - xmlstarlet

install: true

jobs:
  fast_finish: true
  include:
    - jdk: openjdk8
      env:
        - DESC="tests and deploy"
        - CMD="mvn -e --no-transfer-progress clean integration-test failsafe:verify
          -DargLine='-Xms1024m -Xmx2048m'"
        - DEPLOY="true"
        - USE_MAVEN_REPO="true"

    - jdk: openjdk8
      env:
        - DESC="NoErrorTest - Postgresql JDBC Driver"
        - CMD1="mvn -e --no-transfer-progress clean install -Pno-validations"
        - CMD2="./.ci/wercker.sh no-error-pgjdbc"
        - CMD="$CMD1 && $CMD2"
        - USE_MAVEN_REPO="true"

    - jdk: openjdk8
      env:
        - DESC="NoErrorTest - Orekit"
        - CMD1="mvn -e --no-transfer-progress clean install -Pno-validations"
        - CMD2="./.ci/wercker.sh no-error-orekit"
        - CMD="$CMD1 && $CMD2"
        - USE_MAVEN_REPO="true"

    - jdk: openjdk8
      env:
        - DESC="NoErrorTest - Hibernate Search"
        - CMD1="mvn -e --no-transfer-progress clean install -Pno-validations"
        - CMD2="./.ci/wercker.sh no-error-hibernate-search"
        - CMD="$CMD1 && $CMD2"
        - USE_MAVEN_REPO="true"

    - jdk: openjdk8
      env:
        - DESC="NoErrorTest - sevntu-checks"
        - CMD1="mvn -e --no-transfer-progress clean install -Pno-validations"
        - CMD2="./.ci/wercker.sh no-error-sevntu-checks"
        - CMD="$CMD1 && $CMD2"
        - USE_MAVEN_REPO="true"

    - jdk: openjdk8
      env:
        - DESC="NoErrorTest - contribution"
        - CMD1="mvn -e --no-transfer-progress clean install -Pno-validations"
        - CMD2="./.ci/wercker.sh no-error-contribution"
        - CMD="$CMD1 && $CMD2"
        - USE_MAVEN_REPO="true"

    - jdk: openjdk8
      env:
        - DESC="NoErrorTest - methods distance"
        - CMD1="mvn -e --no-transfer-progress clean install -Pno-validations"
        - CMD2="./.ci/wercker.sh no-error-methods-distance"
        - CMD="$CMD1 && $CMD2"
        - USE_MAVEN_REPO="true"

    - jdk: openjdk8
      env:
        - DESC="NoErrorTest - Spring Cloud GCP"
        - CMD1="mvn -e --no-transfer-progress clean install -Pno-validations"
        - CMD2="./.ci/wercker.sh no-error-spring-cloud-gcp"
        - CMD="$CMD1 && $CMD2"
        - USE_MAVEN_REPO="true"

    - jdk: openjdk8
      env:
        - DESC="NoErrorTest - EqualsVerifier"
        - CMD1="mvn -e --no-transfer-progress clean install -Pno-validations"
        - CMD2="./.ci/wercker.sh no-error-equalsverifier"
        - CMD="$CMD1 && $CMD2"
        - USE_MAVEN_REPO="true"

script: true

# ====> Slack notification..
notifications:
  slack:
    secure: VoE5SUTQ3VkkJGyOOcpNJ4X1FyphB22Qa8Q27ZCYluhw1L02k2r/vWIsIGWe2KfStTlFupFeKqeF8QOYD8l9BxwOK6l7lDR9PUbR5paV8nD0wMs7OA8msTYXpvJH46fVdrmqVyRBFc+RE3ORw00TsHbShiNR+8zAhoEYFiwROZVsVvIBTfV4TZedYi6OW5Rg2NInf4mNX0fPKRVJTZ/euK+NIaKRticpAw0qfxK+seAyJ5UjqJ5QjMUa1lebq4vAETgk5g41ghQuhdLq1GIs7Na8+sCaQk+Yax4OxEsyy5yRmEkohxt0+cMHMKApbHl/5y2rQA6m5iJ8HliRJuWkSvTOxPeY2oQ4i8R7zY6l9y5IcYdU1M9MjfHzt0nQ6m4UUna0AWLdumGifhI+l8XtVhbHpQ2xd0oNVmOfF636JG+80WH3JJcbsOt8fwaxNeZP/HarpIB1XVrRtnVh3JaGsu3O1T6zoTZUBUwspQKK7k1Fl8sso+lCTNhoTPjgTiloOGhBFA4vBDF1U/JRdTksbXeLdx51Jx/8kyU6IXjsOU6bZLz3jZMRpQzy5TkNAO51mYnx4RoQF/QrBKSTp1OjZh+CaWUMBCzFTDqgONTbmesUD2PqbOkifaB1+0Rq9L46sNLM1YS4JZIpWNW6yg30tgjAqryI8Xu1W2Ka8153db4=